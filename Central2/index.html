<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ovládanie Hvezdárne - Central2</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-gray-100 p-6">
    <h1 class="text-2xl font-semibold text-center text-gray-800 mb-8">Ovládanie Hvezdárne - Central2</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="bg-white shadow-md rounded-lg p-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">ATACAMA</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-medium text-gray-600">Zásuvky</h3>
                    <div class="grid grid-cols-3 gap-2 mt-2">
                        <label class="text-gray-700">NOUT</label>
                        <button id="nout-on" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Zapnúť</button>
                        <button id="nout-off" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Vypnúť</button>
                        <span id="nout-status" class="text-gray-700"><i class="fas fa-circle text-red-500"></i></span>
                    </div>
                    <div class="grid grid-cols-3 gap-2 mt-2">
                        <label class="text-gray-700">C14</label>
                        <button id="c14-on" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Zapnúť</button>
                        <button id="c14-off" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Vypnúť</button>
                        <span id="c14-status" class="text-gray-700"><i class="fas fa-circle text-red-500"></i></span>
                    </div>
                    <div class="grid grid-cols-3 gap-2 mt-2">
                        <label class="text-gray-700">RC16</label>
                        <button id="rc16-on" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Zapnúť</button>
                        <button id="rc16-off" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Vypnúť</button>
                        <span id="rc16-status" class="text-gray-700"><i class="fas fa-circle text-red-500"></i></span>
                    </div>
                </div>
                <div>
                    <button id="indistarter" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Spustiť INDISTARTER</button>
                    <span id="indistarter-status" class="text-gray-700 ml-2"><i class="fas fa-circle text-red-500"></i></span>
                </div>
                <div>
                    <h3 class="font-medium text-gray-600">Strecha</h3>
                    <div class="grid grid-cols-3 gap-2 mt-2">
                        <button id="strecha-sever" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">Sever</button>
                        <button id="strecha-juh" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">Juh</button>
                        <span id="strecha-status" class="text-gray-700"><i class="fas fa-circle text-red-500"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white shadow-md rounded-lg p-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">WAKE-ON-LAN</h2>
            <div class="space-y-4">
                <button id="az2000-wol" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Zapni AZ2000</button>
                <button id="gm3000-wol" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Zapni GM3000</button>
            </div>
        </div>
    </div>

    <div class="bg-white shadow-md rounded-lg p-6 mt-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">OTA Aktualizácie</h2>
        <button id="aktualizovat" class="bg-yellow-500 hover:bg-yellow-700 text-gray-800 font-bold py-2 px-4 rounded">Aktualizovať program</button>
    </div>

    <div class="mt-6">
        <h2 class="text-lg font-semibold text-gray-700 mb-2">Link na kameru</h2>
        <p class="text-gray-600"><a href="http://172.20.20.134" class="text-blue-500 hover:underline">Kamera Atacama</a></p>
        <p class="text-gray-600"><a href="http://172.20.20.131" class="text-blue-500 hover:underline">Kamera Astrofoto</a></p>
    </div>

    <script>
        const C14_IP = "172.20.20.103";
        const SSH_PORT = 2222;

        function sendSSHCommand(command, elementId) {
            fetch(`http://${C14_IP}:5000/ssh`, {  // Predpokladáme, že server beží na porte 5000
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ command: command }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log(data);
                if (elementId) {
                    const statusElement = document.getElementById(elementId);
                    if (statusElement) {
                        statusElement.innerHTML = '<i class="fas fa-circle text-green-500"></i>';
                    }
                }
            })
            .catch(error => {
                console.error('Error:', error);
                if (elementId) {
                    const statusElement = document.getElementById(elementId);
                     if (statusElement) {
                        statusElement.innerHTML = '<i class="fas fa-circle text-red-500"></i>';
                    }
                }
            });
        }

        document.getElementById('nout-on').addEventListener('click', () => sendSSHCommand('zasuvka NOUT on', 'nout-status'));
        document.getElementById('nout-off').addEventListener('click', () => sendSSHCommand('zasuvka NOUT off', 'nout-status'));
        document.getElementById('c14-on').addEventListener('click', () => sendSSHCommand('zasuvka C14 on', 'c14-status'));
        document.getElementById('c14-off').addEventListener('click', () => sendSSHCommand('zasuvka C14 off', 'c14-status'));
        document.getElementById('rc16-on').addEventListener('click', () => sendSSHCommand('zasuvka RC16 on', 'rc16-status'));
        document.getElementById('rc16-off').addEventListener('click', () => sendSSHCommand('zasuvka RC16 off', 'rc16-status'));
        document.getElementById('indistarter').addEventListener('click', () => sendSSHCommand('indistarter', 'indistarter-status'));
        document.getElementById('strecha-sever').addEventListener('click', () => sendSSHCommand('strecha sever', 'strecha-status'));
        document.getElementById('strecha-juh').addEventListener('click', () => sendSSHCommand('strecha juh', 'strecha-status'));
        document.getElementById('az2000-wol').addEventListener('click', () => sendSSHCommand('wakeonlan 00:c0:08:a9:c2:32', 'az2000-status'));
        document.getElementById('gm3000-wol').addEventListener('click', () => sendSSHCommand('wakeonlan 00:c0:08:aa:35:12', 'gm3000-status'));
        document.getElementById('aktualizovat').addEventListener('click', () => sendSSHCommand('aktualizuj', 'aktualizovat-status'));
    </script>
</body>
</html>
